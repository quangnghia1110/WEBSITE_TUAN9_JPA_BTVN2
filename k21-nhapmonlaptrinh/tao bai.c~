#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <string.h>
typedef char WORD[12];
WORD** Alloc2DWord(int m, int n);
WORD** dealDeck(WORD deck[52], int so_nguoi,int so_con_bai);
void printNguoi(WORD **nguoi,int so_nguoi,int so_con_bai);
void Free2DWord(WORD** a);
void createDeck(WORD deck[52]);
void printDeck(WORD deck[52]);
void shuffleDeck(WORD deck[52]);
int randInt(int low, int high);
int main() {
	srand((unsigned int )time(NULL));
	WORD deck[52];
	createDeck(deck);
	printDeck(deck);
	WORD** nguoi=dealDeck(deck,5,3);
	printNguoi(nguoi,5,3);
	Free2DWord(nguoi);
	return 0;
}
int randInt(int low, int high)
{
	double x=(1.0*high-low)*rand()/RAND_MAX+low;
	return (int)(x+0.5);
}
void createDeck(WORD deck[52])
{
	WORD chuSo[]={"2","3","4","5","6","7","8","9","T","J","Q","K","A"};
	WORD loaiBai[]={"CO","RO","CHUON","BICH"};
	int i,j,k=0;
	WORD temp;
	for(i=0;i<13;i++)
		for(j=0;j<4;j++)
		{
			strcpy(temp, chuSo[i]);
			strcat(temp, "_");
			strcat(temp, loaiBai[j]);
			strcpy(deck[k++], temp);
		
		}
	return;
}
void printDeck(WORD deck[52])
{
	int k=0;
	while(k<52)
	{
		printf("%-12s",deck[k]);
		k++;
		if (k%4==0)
			printf("\n");
			
	}
}
void shuffleDeck(WORD deck[52])
{
	int i,j;
	WORD temp;
	for(i=0;i<52;i++)
	{
		j=randInt(0,51);
		strcpy(temp,deck[i]);
		strcpy(deck[i],deck[j]);
		strcpy(deck[j],temp);
	}
	return;
}
WORD** Alloc2DWord(int m, int n)
{
	WORD* data = (WORD* )calloc(m*n,sizeof(WORD));
	WORD** a=(WORD** )calloc(m,sizeof(WORD*));
	int i;
	for(i=0;i<m;i++)
		a[i]=data+i*n;
	return a;	
}
void Free2DWord(WORD** a)
{
	free(*a);
	free(a);
}
WORD** dealDeck(WORD deck[52], int so_nguoi,int so_con_bai)
{
	WORD**nguoi= Alloc2DWord(so_nguoi,so_con_bai);
	int i,j,k=0;
	for (i=0;i< so_con_bai;i++)
		for(j=0;j<so_nguoi;j++)
			strcpy(nguoi[j][i],deck[k++]);
	return nguoi;
}
void printNguoi(WORD **nguoi,int so_nguoi,int so_con_bai)
{
	int i,j;
	for(i=0;i<so_nguoi;i++)
	{
		for(j=0;j<so_con_bai;j++)
			printf("%-12s", nguoi[i][j]);
		printf("\n");
	}
}


